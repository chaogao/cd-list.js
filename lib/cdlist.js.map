{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5a2e406a07f430e88452","webpack:///./src/index.js","webpack:///external \"jQuery\"","webpack:///./src/addons/filter.js","webpack:///./src/template.js","webpack:///./src/addons/pagination.js","webpack:///./src/tools/pagination.js","webpack:///./src/addons/search.js","webpack:///./src/tools/mixin.js","webpack:///./src/tools/event.js","webpack:///./src/addons/sort.js","webpack:///./src/tools/history_h5.js","webpack:///./src/tools/history.js","webpack:///./src/tools/url.js"],"names":["tools","addons","TPL_CD_LAYOUT","TPL_CD_EMPTY","STAT_LOADING","STAT_LOADED","DEFAULT_HISTORY_CONF","base","window","location","pathname","_option","disableHistory","CdList","option","el","Object","assign","$el","addClass","_bindHistory","_initEvent","setAddons","key","historyOpt","preventDisptach","_pushAction","_pushTimer","clearTimeout","setTimeout","_pushHistory","value","_actions","forEach","a","apply","self","_doAction","param","console","log","history","push","cb","state","historyOption","getState","hash","decodeURIComponent","url","getParamMap","listen","_disptachHistory","undefined","trigger","on","getList","html","$topPluginContainer","find","$bottomPluginContainer","$listContainer","initView","_isLoading","ajaxInstance","abort","urlData","getAddonData","getUrl","getAjaxData","_getAjaxData","_startLoading","done","json","rowData","getRowsData","_endLoading","_firstGet","length","_render","_renderEmpty","addonsList","addon","_validateAddon","setRoot","getName","warn","_initView","f","item","empty","ajax","__load_state","removeClass","tbodyStr","data","str","rows","isTable","tableClass","headerRow","join","ulClass","Filter","Pagination","Search","Sort","template","require","TPL_FILTER","TPL_FILTER_LINE","_addonName","resetList","container","root","$container","_getContainer","append","_getHTML","filter","filters","name","setHistory","historyKey","preventSet","addonName","reset","line","delegate","e","siblings","_triggerResetEvent","historyEnable","attr","_setHash","prop","val","activeIndex","historyValue","getHistoryValue","datas","idx","_dealFilterData","preventHistory","_getFilterByName","$li","hasClass","$option","hashData","currentData","hashValue","setActive","resetIndex","each","tmpl","fn","test","cache","document","getElementById","innerHTML","Function","replace","split","PaginationTool","TPL_PA","_initPage","parseInt","setting","getSetting","_pageInstance","pageCount","total","currentPage","savedIndex","allwaysShow","maxShowPage","preventInitEvent","page","removeHistory","destroy","setPage","getPage","textLabel","pageLabel","PAGE_TPL","element","$","extend","generatePage","renderDatas","generateEvents","getHTML","getRenderDatas","Event","undelegate","isNumeric","start","end","offsetEnd","offsetStart","flag","Math","abs","slice","i","label","className","isFunction","TPL_SEARCH","btnText","placeholder","$input","_validateValue","keyCode","regex","RegExp","_onError","_dealSearchData","oriValue","setValue","mix","Mix","mixins","mixin","copyProperties","prototype","target","source","Reflect","ownKeys","desc","getOwnPropertyDescriptor","defineProperty","handlers","_zid","returnFalse","returnTrue","type","isDefaultPrevented","isPropagationStopped","preventDefault","stopPropagation","zid","context","findHandlers","handler","EventMixin","id","set","concat","TPL_SORT","historyTypeKey","$activeItems","_dealItem","$item","filterData","_findDataItem","get","_resetItem","types","indexOf","currentType","_triggerChange","nextIndex","nextType","dataItem","index","activeSort","$lastDom","filterTypes","_dealSortData","itemData","typeKey","activeTypeIndex","defaultSort","SORT_MAP","ASC","DESC","getLocation","path","search","pushState","canHistory","replaceState","href","cleanPath","HTML5History","_listenPop","addEventListener","n","go","call","normalizeBase","baseEl","querySelector","getAttribute","History","getParamStr","urlParts","urlParamString","substring","getParams","params","map","kvs","paramName","getParam","addParam","paramStr"],"mappings":"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","file":"cdlist.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"CdList\", [\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CdList\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"CdList\"] = factory(root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"lib\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5a2e406a07f430e88452\n **/","import $ from 'jquery';\n\nimport Filter from './addons/filter.js';\nimport Pagination from './addons/pagination.js';\nimport Search from './addons/search.js';\nimport Sort from './addons/sort.js';\n\nimport EventMixin from './tools/event.js';\nimport HTML5History from './tools/history_h5.js';\nimport mixin from './tools/mixin.js';\nimport url from './tools/url';\n\nlet tools;\nlet addons;\nlet TPL_CD_LAYOUT  = [\n  '<div data-cd-container=\"plugin-top\"></div>',\n  '<div class=\"cdlist-list-container\" data-cd-container=\"list\"></div>',\n  '<div data-cd-container=\"plugin-bottom\"></div>'\n];\nlet TPL_CD_EMPTY = '<div class=\"cdlist-list-empty\">没有数据，重新查询</div>';\n\nconst STAT_LOADING = 'STATE_LOADING';\nconst STAT_LOADED = 'STAT_LOADED';\n\nconst DEFAULT_HISTORY_CONF = {\n  base: window.location.pathname\n};\n\nlet _option = {\n  disableHistory: false\n}\n\nclass CdList extends mixin(EventMixin) {\n  constructor(option, el) {\n    super();\n\n    this.option = Object.assign({}, _option, option);\n    this.$el = $(el).addClass('cdlist-root-container');\n\n    this._bindHistory();\n    this._initEvent();\n\n    this.setAddons(option.addons);\n  }\n\n  getHistoryValue (key) {\n    if (this.historyOpt) {\n      return this.historyOpt[key];\n    }\n  }\n\n  removeHistory (key, preventDisptach) {\n    if (!this.historyOpt) {\n      return;\n    }\n\n    // 防止立即执行\n    this._pushAction(function () {\n      delete this.historyOpt[key];\n    });\n\n    this._pushTimer && clearTimeout(this._pushTimer);\n    this._pushTimer = setTimeout(() => {\n      this._pushHistory(preventDisptach);\n    }, 5);\n  }\n\n  /**\n   *\n   */\n  setHistory (key, value, preventDisptach) {\n    this.historyOpt = this.historyOpt || {};\n\n    // 和以前的一样不需要改变\n    if (this.historyOpt[key] == value) {\n      return;\n    }\n\n    this._pushAction(function () {\n      this.historyOpt[key] = value;\n    });\n\n    // addons will call many times\n    // but only push history onec\n    this._pushTimer && clearTimeout(this._pushTimer);\n    this._pushTimer = setTimeout(() => {\n      this._pushHistory(preventDisptach);\n    }, 5);\n  }\n\n  _doAction () {\n    this._actions.forEach((a) => {\n      a.apply(this);\n    });\n\n    this._actions = [];\n  }\n\n  _pushHistory (preventDisptach) {\n    var self = this;\n\n    self._doAction();\n\n    var historyOpt = self.historyOpt;\n    var param = $.param(historyOpt);\n\n    console.log('push:' + param);\n    self.preventDisptach = preventDisptach;\n    self.history.push('?' + param);\n  }\n\n  _pushAction (cb) {\n    var self = this;\n\n    self._actions = self._actions || [];\n    self._actions.push(cb);\n  }\n\n  /**\n   * bind history Event\n   * every cdlist will listen history, and disptach change events\n   * but addon can decide whether to response this event self\n   */\n  _bindHistory () {\n    var self = this,\n      state, historyOpt;\n\n    var option = Object.assign({}, DEFAULT_HISTORY_CONF, self.option.historyOption);\n\n    this.history = new HTML5History(option.base, {\n      disableHistory: this.option.disableHistory\n    });\n\n    // get init history state\n    var state = this.history.getState();\n    var hash = decodeURIComponent(state.hash);\n    hash && (this.historyOpt = tools.url.getParamMap(hash));\n\n    this.history.listen((state) => {\n      var historyOpt = this.historyOpt = tools.url.getParamMap(decodeURIComponent(state.hash));\n\n      console.log(historyOpt);\n\n      if (!self.preventDisptach) {\n        self._disptachHistory(historyOpt);\n      }\n\n      self.preventDisptach = undefined;\n    });\n  }\n\n  _disptachHistory (historyOpt) {\n    this.trigger('hashchange', [historyOpt]);\n  }\n\n  _initEvent () {\n    this.on('reflow', () => {\n      this.getList();\n    });\n  }\n\n  /**\n   * init cd list baseview & eveny addons\n   */\n  _initView () {\n    this.$el.html(TPL_CD_LAYOUT);\n    this.$topPluginContainer = this.$el.find('[data-cd-container=plugin-top]');\n    this.$bottomPluginContainer = this.$el.find('[data-cd-container=plugin-bottom]');\n    this.$listContainer = this.$el.find('[data-cd-container=list]');\n\n    for (var key in this.addons) {\n      this.addons[key].initView();\n    }\n  }\n\n  getList () {\n    var self = this;\n\n    // if ajax is getting data , abort it\n    if (self._isLoading()) {\n      self.ajaxInstance.abort();\n    }\n\n    var urlData = {};\n\n    for (var key in this.addons) {\n      urlData[key] = this.addons[key].getAddonData();\n    }\n\n    var url = self.option.getUrl(urlData);\n\n    // 通过 option AJAX 可以发送跨域请求\n    if (url) {\n      self.ajaxInstance = self.option.getAjaxData ? self.option.getAjaxData(url)\n        : self._getAjaxData(url);\n\n      self._startLoading();\n\n      // 成功回调处理\n      self.ajaxInstance.done(function (json) {\n        var rowData = self.option.getRowsData(json);\n\n        self.trigger('loadeddata', [json]);\n\n        self._endLoading(json);\n        self._firstGet = false;\n\n        if (rowData && rowData.length) {\n          self._render(rowData, json);\n        } else {\n          self._renderEmpty();\n        }\n      });\n    }\n  }\n\n  setAddons (addonsList = []) {\n    var self = this;\n\n    self.addons = {};\n\n    // 初始化各个 addons\n    addonsList.forEach(function (addon) {\n      if (self._validateAddon(addon)) {\n        addon.setRoot(self);\n        self.addons[addon.getName()] = addon\n      } else {\n        console.warn('your addon ' + addon.getName() + ' is invaild');\n      }\n    });\n\n    self._initView();\n\n    return self;\n  }\n\n  _validateAddon (addon) {\n    var f = true;\n\n    ['getName', 'initView', 'setRoot'].forEach(function (item) {\n      if (addon[item] === undefined) {\n        f = false;\n        return false;\n      }\n    });\n\n    return f;\n  }\n\n  _renderEmpty () {\n    this.$listContainer.html(this.option.empty ? this.option.empty() : TPL_CD_EMPTY);\n  }\n\n  _getAjaxData (url) {\n    return $.ajax({\n      url: url\n    });\n  }\n\n  _isLoading () {\n    return this.__load_state == STAT_LOADING;\n  }\n\n  _startLoading () {\n    this.__load_state = STAT_LOADING;\n    this.$el.addClass('loading');\n    this.trigger('startloading');\n  }\n\n  _endLoading (json) {\n    this.__load_state = STAT_LOADED;\n    this.$el.removeClass('loading');\n    this.trigger('endloading', [json]);\n  }\n\n  _render (rowData, json) {\n    var self = this,\n      html;\n\n    var tbodyStr = '';\n\n    rowData.forEach(function (data) {\n      var str = self.option.rows(data);\n\n      tbodyStr += str;\n    });\n\n    if (self.option.isTable) {\n      html = ['<table class=\\\"' + (self.option.tableClass || '') + '\\\">',\n        '<thead>',\n          self.option.headerRow(rowData, json),\n        '</thead>',\n        '<tbody>',\n          tbodyStr,\n        '</tbody>',\n      '</table>'].join(\"\");\n    } else {\n      html = ['<ul class=\\\"' + (self.option.ulClass || '') + '\\\">',\n          tbodyStr,\n      '</ul>'].join(\"\");\n    }\n\n    self.$listContainer.html(html);\n  }\n}\n\nCdList.addons = addons = {\n  Filter,\n  Pagination,\n  Search,\n  Sort\n};\n\nCdList.tools = tools = {\n  url: url\n}\n\nexport default CdList;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 1\n ** module chunks = 0\n **/","import $ from 'jquery';\nvar template = require('../template');\n\nvar TPL_FILTER = '<div class=\"cdlist-filter-container\">' +\n  '<ul>' +\n    '<% for (var i = 0; i < filters.length; i++) { %>' +\n      '<li>' +\n        '<span class=\"cdlist-filter-select-name\"><%= filters[i].label %></span>' +\n        '<select name=\\'<%= filters[i].name %>\\'>' +\n          '<% for (var j = 0; j < filters[i].datas.length; j++) { %>' +\n            '<option <% if (j == filters[i].activeIndex) { %>selected=\"selected\"<% } %>  data-idx=\"<%= j %>\" value=\\'<%= filters[i].datas[j].value %>\\'><%= filters[i].datas[j].name %></option>' +\n          '<% } %>' +\n        '</select>' +\n      '</li>' +\n    '<% } %>' +\n  '</ul>' +\n'</div>';\n\nvar TPL_FILTER_LINE = '<div class=\"cdlist-filter-container cdlist-filter-container-line\">' +\n    '<ul>' +\n      '<% for (var i = 0; i < filters.length; i++) { %>' +\n        '<li <% if (filters[i].className) { %>class=\"<%= filters[i].className %>\" <% } %> >' +\n          '<% if (filters[i].label) { %>' +\n            '<div class=\"cdlist-filter-select-name\"><%= filters[i].label %></div>' +\n          '<% } %>' +\n          '<ul class=\"cdlist-filter-raw-list\">' +\n            '<% for (var j = 0; j < filters[i].datas.length; j++) { %>' +\n              '<li data-name=\"<%= filters[i].name %>\" class=\"cdlist-filter-raw-item <% if (j == filters[i].activeIndex) { %>cdlist-filter-raw-item-active<% } %>\" data-value=\"<%= filters[i].datas[j].value %>\">' +\n                '<a href=\"javascript:void(0)\"><%= filters[i].datas[j].name %></a>' +\n              '</li>' +\n            '<% } %>' +\n          '</ul>' +\n        '</li>' +\n      '<% } %>' +\n    '</ul>' +\n  '</div>';\n\n\nlet _addonName = 'filter';\nlet _option = {\n  resetList: ['pagination']\n};\n\nexport default class Filter {\n\n  constructor (option) {\n    this.option = Object.assign({}, _option, option);\n  }\n\n  getName () {\n    return _addonName;\n  }\n\n  /**\n   * 获取存放 filter 的 container\n   */\n  _getContainer () {\n    return this.option.container ? $(this.option.container) : this.root.$topPluginContainer;\n  }\n\n  initView () {\n    var self = this;\n    var $container = self._getContainer();\n\n    $container.append($(self._getHTML()));\n\n    this._initEvent();\n  }\n\n  /**\n   * 改变 filter 时设置 hash\n   */\n  _setHash (key, value) {\n    var self = this;\n\n    // 找到 filter\n    var filter = self.option.filters.filter(function (item) {\n      return key == item.name\n    })[0];\n\n    if (filter) {\n      self.root.setHistory(filter.historyKey || filter.name, value);\n    }\n  }\n\n  _triggerResetEvent (preventSet) {\n    this.option.resetList.forEach((addonName) => {\n      this.root.trigger(addonName + '.reset', [preventSet])\n    });\n  }\n\n  _initEvent () {\n    var self = this;\n\n    // 监听使自己 reset 的事件\n    self.root.on('filter.reset', () => {\n      self.reset();\n    });\n\n    // 发生改变立即进行重新请求\n    if (self.option.line) {\n      self._getContainer().delegate('.cdlist-filter-raw-item', 'click', function (e, preventSet) {\n        $(this).addClass('cdlist-filter-raw-item-active')\n          .siblings().removeClass('cdlist-filter-raw-item-active');\n\n        self._triggerResetEvent(preventSet);\n        self.root.trigger('reflow');\n\n        // 设置 filter 的 hash\n        if (self.option.historyEnable && !preventSet) {\n          var key = $(this).attr('data-name');\n          var value = $(this).attr('data-value');\n\n          self._setHash(key, value, true);\n        }\n      });\n    } else {\n      self._getContainer().delegate('select', 'change', function (e, preventSet) {\n        self._triggerResetEvent(preventSet);\n        self.root.trigger('reflow');\n\n        // 设置 filter 的 hash\n        if (self.option.historyEnable && !preventSet) {\n          var key = $(this).prop('name');\n          var value = $(this).val();\n\n          self._setHash(key, value, true);\n        }\n      });\n    }\n  }\n\n  /**\n   * 处理默认的 filter 数据\n   * 找到每个 filter 的初始化选中的内容\n   */\n  _dealFilterData (filters) {\n    var self = this,\n      option = self.option;\n\n    filters.forEach(function (item) {\n      // 最先控制本身的 activeIndex\n      if (item.activeIndex !== undefined) {\n        return;\n      }\n\n      // 开启 history 模式\n      // 需要找到 hash 对应的选项\n      if (self.option.historyEnable) {\n        var historyKey = item.historyKey || item.name;\n        var historyValue = self.root.getHistoryValue(historyKey);\n\n        if (historyValue) {\n          item.datas.forEach(function (data, idx) {\n            if (historyValue == data.value) {\n              item.activeIndex = idx;\n            }\n          });\n        }\n      }\n\n      // 总有 index\n      item.activeIndex = item.activeIndex || 0;\n    });\n  }\n\n  /**\n   * 渲染 filter 模板\n   */\n  _getHTML () {\n    var filters = this.option.filters;\n    var self = this;\n\n    self._dealFilterData(filters);\n\n    if (self.option.line) {\n      return template(TPL_FILTER_LINE, {filters: filters});\n    } else {\n      return template(TPL_FILTER, {filters: filters});\n    }\n  }\n\n  /**\n   * 设置 filter 一项的选中状态\n   */\n  setActive (name, value, preventHistory) {\n    var filter = this._getFilterByName(name);\n    var self = this;\n\n    if (!filter) {\n      return;\n    }\n\n    if (self.option.line) {\n      var $li = self._getContainer().find('.cdlist-filter-raw-item[data-name=\"' + filter.name + '\"][data-value=\"' + value + '\"]');\n\n      // 已经选中了就不触发了\n      if ($li.hasClass('cdlist-filter-raw-item-active')) {\n        return;\n      }\n\n      if ($li.length) {\n        $li.trigger('click', [preventHistory]);\n      }\n    } else {\n      var $option = self._getContainer().find('select[name=\"' + filter.name + '\"] option[value=\"' + value + '\"]');\n\n      if ($option.prop('selected')) {\n        return;\n      }\n\n      if ($option.length) {\n        self._getContainer().find('select[name=\"' + filter.name + '\"]')\n          .prop('selectedIndex', $option.data('idx'))\n          .trigger('change', [preventHistory]);\n      }\n    }\n  }\n\n  /**\n   * 通过 name 获取 filter 项目\n   */\n  _getFilterByName (name) {\n    var filter = this.option.filters.filter(function (item) {\n      return name == item.name\n    });\n\n    return filter[0];\n  }\n\n  /**\n   * 设置 addon 的 root 对象\n   */\n  setRoot (root) {\n    var self = this;\n\n    self.root = root;\n\n    // 如果可以改变 hash\n    if (self.option.historyEnable) {\n      self.root.on('hashchange', function (e, hashData) {\n        var currentData = self.getAddonData(true);\n\n        for (var key in currentData) {\n          // 找到 filter\n          var filter = self._getFilterByName(key);\n\n          // 没有 filter 就继续\n          if (!filter) {\n            continue;\n          }\n\n          // 找到 history key\n          var historyKey = filter.historyKey || filter.name;\n\n          // 判定是否相等\n          // 如果不相等需要改变 当前显示，并派发请求\n          // 如果没有 hashValue 则为 filter 默认选中状态的 value\n          var hashValue = hashData[historyKey] || filter.datas[filter.activeIndex].value;\n\n          if (hashValue != currentData[key]) {\n            if (self.option.line) {\n              var value = hashData[historyKey] || filter.datas[filter.activeIndex].value;\n\n              var $li = self._getContainer().find('.cdlist-filter-raw-item[data-name=\"' + key + '\"][data-value=\"' + value + '\"]');\n\n              if ($li.length) {\n                $li.trigger('click', [true]);\n              }\n            } else {\n              var value = hashData[historyKey] || filter.datas[filter.activeIndex].value;\n\n              var $option = self._getContainer().find('select[name=\"' + key + '\"] option[value=\"' + value + '\"]');\n\n              if ($option.length) {\n                self._getContainer().find('select[name=\"' + key + '\"]').prop('selectedIndex', $option.data('idx'))\n                  .trigger('change', [true]);\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * 重置 filter 所有的 select\n   */\n  reset () {\n    this.option.filters.forEach((filter) => {\n      this.setActive(filter.name, filter.datas[filter.resetIndex || 0].value);\n    });\n  }\n\n  /**\n   * 获取 addon 提供的 url 数据\n   */\n  getAddonData () {\n    var data = {};\n    var self = this;\n    var filters = self.option.filters;\n\n    if (self.option.line) {\n      this._getContainer().find('.cdlist-filter-raw-item-active').each(function () {\n        data[$(this).attr('data-name')] = $(this).attr('data-value');\n      });\n    } else {\n      this._getContainer().find('select').each(function () {\n        data[$(this).prop('name')] = $(this).val();\n      });\n    }\n\n    return data;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/addons/filter.js\n **/","// Simple JavaScript Templating\n// John Resig - http://ejohn.org/ - MIT Licensed\nexport default function tmpl (str, data) {\n  // Figure out if we're getting a template, or if we need to\n  // load the template - and be sure to cache the result.\n  var fn = !/\\W/.test(str) ?\n    cache[str] = cache[str] ||\n      tmpl(document.getElementById(str).innerHTML) :\n\n    // Generate a reusable function that will serve as a template\n    // generator (and which will be cached).\n    new Function(\"obj\",\n      \"var p=[],print=function(){p.push.apply(p,arguments);};\" +\n\n      // Introduce the data as local variables using with(){}\n      \"with(obj){p.push('\" +\n\n      // Convert the template into pure JavaScript\n      str\n        .replace(/[\\r\\t\\n]/g, \" \")\n        .split(\"<%\").join(\"\\t\")\n        .replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\n        .replace(/\\t=(.*?)%>/g, \"',$1,'\")\n        .split(\"\\t\").join(\"');\")\n        .split(\"%>\").join(\"p.push('\")\n        .split(\"\\r\").join(\"\\\\'\")\n    + \"');}return p.join('');\");\n\n  // Provide some basic currying to the user\n  return data ? fn( data ) : fn;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/template.js\n **/","import $ from 'jquery'\nvar template = require('../template');\nvar PaginationTool = require('../tools/pagination.js');\n\nvar TPL_PA = '<div class=\"cdlist-pagination-container\"></div>';\n\nlet _addonName = 'pagination';\n\nexport default class Pagination {\n  constructor (option) {\n    // 设置默认的 historyKey\n    if (option.historyEnable) {\n      option.historyKey = option.historyKey || 'page';\n    }\n\n    this.option = option;\n  }\n\n  getName () {\n    return _addonName;\n  }\n\n  /**\n   * 获取存放 addons 的 container\n   */\n  _getContainer () {\n    return this.option.container ? $(this.option.container) : this.root.$bottomPluginContainer;\n  }\n\n  /**\n   * addons 的 view 渲染\n   */\n  initView () {\n    var self = this;\n\n    self._getContainer().html(TPL_PA);\n    self._initEvent();\n\n    if (self.option.historyEnable && self.root.getHistoryValue(self.option.historyKey)) {\n      self._initPage = parseInt(self.root.getHistoryValue(self.option.historyKey));\n    }\n\n    // 在完成回调时执行真正的 initView\n    self.root.on('endloading', function (e, json) {\n      self._initView(json);\n    });\n  }\n\n  /**\n   * 真正初始化分页控件的位置\n   */\n  _initView (json) {\n    var self = this,\n      setting = self.option.getSetting(json),\n      $container = self._getContainer();\n\n    if (!self._pageInstance && setting) {\n      self._pageInstance = new PaginationTool($container.find('.cdlist-pagination-container'), {\n        pageCount: setting.total,\n        currentPage: self.savedIndex || self._initPage || 0,\n        allwaysShow: true,\n        maxShowPage: 3,\n        preventInitEvent: true\n      });\n\n      // initPage 只用一次\n      self.savedIndex = undefined;\n      self._initPage = undefined;\n\n      $(self._pageInstance).on('page', function (e) {\n        self.root.trigger('reflow');\n\n        // 设置 filter 的 hash\n        if (self.option.historyEnable && !self.preventSet) {\n          self.root.setHistory(self.option.historyKey, e.page, true);\n        }\n\n        self.preventSet = undefined;\n      });\n    }\n  }\n\n  /**\n   * 注册事件\n   */\n  _initEvent () {\n    var self = this;\n\n    self.root.on('pagination.reset', function (e, preventDisptach) {\n      self.reset();\n\n      // 删除 historyKey\n      if (self.option.historyKey && !preventDisptach) {\n        self.root.removeHistory(self.option.historyKey);\n      }\n    });\n  }\n\n  /**\n   * 重置 page 控件\n   */\n  reset () {\n    this._pageInstance && this._pageInstance.destroy();\n    this._pageInstance = null;\n  }\n\n  /**\n   * 设置 addon 的 root 对象\n   */\n  setRoot (root) {\n    var self = this;\n\n    this.root = root;\n\n    // 如果可以改变 hash\n    if (self.option.historyEnable) {\n      self.root.on('hashchange', function (e, hashData) {\n        var currentData = self.getAddonData();\n        var historyValue = self.root.getHistoryValue(self.option.historyKey);\n\n        if (currentData != historyValue) {\n          // setPage 不能传递事件参数 通过 wrapper 模拟\n          self.preventSet = true;\n          self._pageInstance && self._pageInstance.setPage(historyValue || 0);\n          self.savedIndex = historyValue;\n          self.preventSet = undefined;\n        }\n      });\n    }\n  }\n\n  /**\n   * 获取 addon 提供的 url 数据\n   */\n  getAddonData () {\n    var page = this._pageInstance ? this._pageInstance.getPage() :\n      (this.savedIndex !== undefined && parseInt(this.savedIndex)) || this._initPage || 0;\n\n    return page;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/addons/pagination.js\n **/","import template from '../template.js';\n\n/**\n * 从 jsmod ui 类库中引入分页插件\n * MIT Licensed\n */\nlet _option = {\n  currentPage: 0,\n  maxShowPage: 10,\n  textLabel: ['首页', '上一页', '下一页', '尾页'],\n  pageLabel: '{#0}',\n  preventInitEvent: false\n};\n\nconst PAGE_TPL = '' +\n '<div class=\"mod-page\">' +\n   '<% for (var i = 0; i < renderDatas.length; i++) { %>' +\n     '<a href=\"javascript:void(0);\" <% if (renderDatas[i].page !== undefined) { %> data-page=\"<%= renderDatas[i].page %>\" <% } %> class=\"mod-page-item <%= renderDatas[i].className %>\"><%= renderDatas[i].label %></a>' +\n   '<% } %>' +\n '</div>';\n\n/**\n * 分页控件，无需写 html ，提供一个 div 节点自动生成所有的分页所需标签\n * @alias module:jsmod/ui/pagination\n * @constructor\n * @param {(dom|string)}      element                                                          分页控件的容器\n * @param {object}            option                                                           分页控件配置参数\n * @param {int}               option.pageCount                                                 一共有多少页\n * @param {int}               [option.currentPage=0]                                           当前页\n * @param {int}               [option.maxShowPage=10]                                          最多显示分页个数\n * @param {array}             [option.textLabel=new Array('首页', '上一页', '下一页', '尾页')] 几个特殊关键字\n * @param {(string|function)} [option.pageLabel={#0}]                                          字符串用 {#0} 代表当前页, 函数则取返回值作为显示。函数其参数 page 为索引计数（起始0）；而替换字符串为 page + 1\n * @param {bool}              [option.preventInitEvent=false]                                  是否阻止初始化时触发事件\n * @param {bool}              [option.allwaysShow=false]                                       是否总是显示\n * @example\n * var Pagination = require(\"jsmod/ui/pagination\");\n *\n * // 创建实例\n * new Pagination(\"#page-container\", {pageCount: 20});\n */\nexport default class Pagination {\n  constructor (element, option) {\n    var self = this;\n\n    self.element = $(element);\n    self.option = $.extend({}, _option, option);\n\n    self.generatePage();\n  }\n  /**\n   * @private\n   * @description 生成分页控件、包括html、event\n   */\n  generatePage () {\n    var self = this,\n      option = self.option,\n      renderDatas, html;\n\n    self.generateEvents();\n\n    if (option.pageCount < option.maxShowPage) {\n      option.maxShowPage = option.pageCount;\n    }\n\n    if (option.preventInitEvent) {\n      self.setPage(option.currentPage);\n    } else {\n      // 异步处理是因为需要获取page对象并绑定事件\n      setTimeout(function() {\n        self.setPage(option.currentPage);\n      }, 0);\n    }\n  }\n\n  /**\n   * 手动设置当前页\n   * @public\n   * @param {int} page 当前页\n   * @fires module:jsmod/ui/pagination#page\n   */\n  setPage (page, preventDisptach) {\n    var self = this,\n      html, e;\n\n    html = self.getHTML(self.getRenderDatas(page));\n    self.element.html(html);\n    e = $.Event(\"page\", {page: self.currentPage});\n\n    /**\n     * 设置page触发的事件，重复设置相同page会触发多次事件\n     * @event module:jsmod/ui/pagination#page\n     * @type {object}\n     * @property {int} page 当前设定的page值\n     */\n    if (!preventDisptach) {\n      $(self).trigger(e, [{page: self.currentPage}]);\n    }\n  }\n\n  /**\n   * 获取当前的 page\n   * @public\n   */\n  getPage () {\n    return this.currentPage;\n  }\n\n  /**\n   * @private\n   * @description 生成事件\n   */\n  generateEvents () {\n    var self = this,\n      element = self.element,\n      option = self.option;\n\n    element.undelegate(\"click.page\");\n    element.delegate(\"[data-page]:not(.mod-page-item-disabled)\", \"click.page\", function(e) {\n      var page = $(this).data(\"page\");\n\n      if ($.isNumeric(page)) {\n        self.setPage(page);\n      } else if (page == \"+\") {\n        self.setPage(self.currentPage + 1);\n      } else if (page == \"-\") {\n        self.setPage(self.currentPage - 1);\n      }\n\n      return false;\n    });\n  }\n\n  /**\n   * 清空分页容器，移除事件\n   * @public\n   */\n  destroy () {\n    this.element.undelegate(\"click.page\");\n    this.element.html(\"\");\n  }\n\n  /**\n   * @private\n   * @description 获取HTML代码\n   * @param {array} renderDatas 渲染分页的数据\n   */\n  getHTML (renderDatas) {\n    var html;\n\n    html = template(PAGE_TPL, {renderDatas: renderDatas});\n    return html;\n  }\n\n  /**\n   * @private\n   * @description 获取分页渲染数据\n   * @param {int} page 标示当前页\n   * @return {array} renderDatas 渲染分页的数据\n   */\n  getRenderDatas (page) {\n    var self = this,\n      option = self.option,\n      renderDatas = [],\n      start, end, offsetEnd, offsetStart;\n\n    page = parseInt(page);\n    page = page < 0 ? 0 : page;\n    page = page > option.pageCount - 1 ? option.pageCount - 1 : page;\n\n    var flag = parseInt(option.maxShowPage / 3); // 分页渲染当前页的标识位\n\n    start = page - flag < 0 ? 0 : page - flag; // start 位置\n    offsetEnd = page - flag < 0 ? Math.abs(page - flag) : 0; // end 的偏移\n\n    end = page + (option.maxShowPage - flag) - 1 > option.pageCount - 1 ? option.pageCount - 1 : page + (option.maxShowPage - flag) -1; // end 位置\n    offsetStart = page + (option.maxShowPage - flag) - 1 > option.pageCount - 1 ? Math.abs(page + (option.maxShowPage - flag) - 1 - (option.pageCount - 1)) : 0 // start 的偏移\n\n    start -= offsetStart;\n    end += offsetEnd;\n\n    if (page != 0 || option.allwaysShow) {\n      // 处理固定的前两个数据\n      $.each(option.textLabel.slice(0, 2), function(i, label) {\n        if (i == 0 && label) {\n          renderDatas.push({\n            className: (page == 0) ? 'mod-page-item-first mod-page-item-disabled' : \"mod-page-item-first\",\n            label: label,\n            page: 0\n          });\n        }\n        if (i == 1 && label) {\n          renderDatas.push({\n            className: (page == 0) ? \"mod-page-item-prev mod-page-item-disabled\" : \"mod-page-item-prev\",\n            label: label,\n            page: \"-\"\n          });\n        }\n      });\n    }\n\n    // 处理页面信息\n    for (start; start <= end; start++) {\n      renderDatas.push({\n        className: start == page ? \"mod-page-item-active\" : \"\",\n        label: $.isFunction(option.pageLabel) ? option.pageLabel(start) : option.pageLabel.replace(/{#0}/g, start + 1),\n        page: start\n      });\n    }\n\n    if (page != option.pageCount - 1 || option.allwaysShow) {\n      // 处理固定的后两个数据\n      $.each(option.textLabel.slice(2, 4), function(i, label) {\n        if (i == 0 && label) {\n          renderDatas.push({\n            className: (page == option.pageCount - 1) ? 'mod-page-item-next mod-page-item-disabled' : \"mod-page-item-next\",\n            label: label,\n            page: \"+\"\n          });\n        }\n        if (i == 1 && label) {\n          renderDatas.push({\n            className: (page == option.pageCount - 1) ? 'mod-page-item-last mod-page-item-disabled' : \"mod-page-item-last\",\n            label: label,\n            page: option.pageCount - 1\n          });\n        }\n      });\n    }\n\n    // 设置当前页码\n    self.currentPage = page;\n\n    return renderDatas;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/pagination.js\n **/","var template = require('../template');\n\nimport $ from 'jquery'\nimport mixin from '../tools/mixin.js';\nimport EventMixin from '../tools/event.js';\n\nlet TPL_SEARCH = '<div class=\"cdlist-search-container\">' +\n  '<input class=\"cdlist-search-input\" value=\"<%= val %>\" placeholder=\"<%= placeholder %>\" />' +\n  '<a href=\"javascript:void(0);\" class=\"cdlist-search-action\"><%= btnText %></a>' +\n'</div>';\n\nlet _option = {\n  btnText: '搜索',\n  val: '',\n  placeholder: '',\n  resetList: ['pagination', 'filter', 'sort']\n}\n\nlet _addonName = 'search'\n\nexport default class Search extends mixin(EventMixin) {\n  constructor (option) {\n    super();\n\n    if (option.historyEnable) {\n      option.historyKey = option.historyKey || 'query';\n    }\n\n    this.option = Object.assign({}, _option, option);\n  }\n\n  _triggerResetEvent (preventSet) {\n    this.option.resetList.forEach((addonName) => {\n      this.root.trigger(addonName + '.reset', [preventSet])\n    });\n  }\n\n  getName () {\n    return _addonName;\n  }\n\n  /**\n   * 获取存放 filter 的 container\n   */\n  _getContainer () {\n    return this.option.container ? $(this.option.container) : this.root.$topPluginContainer;\n  }\n\n  /**\n   * filter 的 view 渲染\n   */\n  initView () {\n    var self = this;\n    var $container = self._getContainer();\n    $container.append($(self._getHTML()));\n\n    this.$input = $container.find('.cdlist-search-input');\n\n    this._initEvent();\n  }\n\n  /**\n   * 注册事件\n   */\n  _initEvent () {\n    var self = this;\n\n    // 检索点击\n    self._getContainer().delegate('.cdlist-search-action', 'click', function (e, preventSet) {\n      if (self._validateValue()) {\n        self._triggerResetEvent();\n        self.root.trigger('reflow');\n\n        if (self.option.historyEnable && !preventSet) {\n          self.root.setHistory(self.option.historyKey, self.getAddonData());\n        }\n      }\n    });\n\n    self._getContainer().delegate('.cdlist-search-input', 'keydown', function (e, preventSet) {\n      if (e.keyCode == 13) {\n        if (self._validateValue()) {\n          self._triggerResetEvent();\n          self.root.trigger('reflow');\n\n          if (self.option.historyEnable && !preventSet) {\n            self.root.setHistory(self.option.historyKey, self.getAddonData());\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * 验证 value 值\n   */\n  _validateValue () {\n    var val = this.getAddonData();\n\n    if (!this.option.regex) {\n      return true;\n    } else {\n      var regex = new RegExp(this.option.regex);\n\n      if (regex.test(val)) {\n        return true;\n      } else {\n        this._onError(val);\n        return false;\n      }\n    }\n  }\n\n  _onError (val) {\n    this.trigger('error', [val])\n  }\n\n  /**\n   * 重置 search addon\n   */\n  reset () {\n    this.$input.val(\"\");\n  }\n\n  /**\n   * 渲染 search html 数据\n   */\n  _getHTML () {\n    this._dealSearchData();\n\n    return template(TPL_SEARCH, this.option);\n  }\n\n  /**\n   * 处理数据默认数据\n   */\n  _dealSearchData () {\n    var option = this.option;\n\n    if (option.value !== undefined) {\n      return;\n    }\n\n    if (option.historyEnable) {\n      var historyValue = this.root.getHistoryValue(this.option.historyKey);\n\n      if (historyValue) {\n        this.option.val = historyValue;\n      }\n    }\n  }\n\n  setValue (value, preventHistory) {\n    var oriValue = this.getAddonData();\n\n    if (value == oriValue) {\n      return;\n    }\n\n    this.$input.val(value).trigger('click', [preventHistory]);\n  }\n\n  /**\n   * 设置 addon 的 root 对象\n   */\n  setRoot (root) {\n    this.root = root;\n\n    // 如果可以改变 hash\n    if (this.option.historyEnable) {\n      this.root.on('hashchange', (e, hashData) => {\n        var historyValue = this.root.getHistoryValue(this.option.historyKey);\n\n        this.setValue(historyValue, true);\n      });\n    }\n  }\n\n  /**\n   * 获取 addon 提供的 url 数据\n   */\n  getAddonData () {\n    return this.$input.val();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/addons/search.js\n **/","export default function mix(...mixins) {\n  class Mix {}\n\n  for (let mixin of mixins) {\n    copyProperties(Mix, mixin);\n    copyProperties(Mix.prototype, mixin.prototype);\n  }\n\n  return Mix;\n}\n\nfunction copyProperties(target, source) {\n  for (let key of Reflect.ownKeys(source)) {\n    if ( key !== \"constructor\"\n      && key !== \"prototype\"\n      && key !== \"name\"\n    ) {\n      let desc = Object.getOwnPropertyDescriptor(source, key);\n      Object.defineProperty(target, key, desc);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/mixin.js\n **/","var handlers = {},\n  _zid = 1;\n\n// 事件对象\nfunction returnFalse () {\n  return false;\n};\n\nfunction returnTrue () {\n  return true;\n};\n\nfunction Event (name, data) {\n  this.type = this.name = name;\n  data && Object.assign(this, data);\n};\n\nEvent.prototype = {\n  isDefaultPrevented: returnFalse,\n  isPropagationStopped: returnFalse,\n  preventDefault: function() {\n    this.isDefaultPrevented = returnTrue;\n  },\n  stopPropagation: function() {\n    this.isPropagationStopped = returnTrue;\n  }\n};\n\n/**\n * 为上下文生成唯一 zid, 用于事件检索\n * @private\n */\nfunction zid (context) {\n  return context._zid || (context._zid = _zid++)\n}\n\n/**\n * 查询 handler\n * @private\n */\nfunction findHandlers(context, name, fn) {\n  return (handlers[zid(context)] || []).filter(function(handler) {\n    return handler && (!name || name == handler.name)\n      && (!fn || fn == handler.fn);\n  });\n}\n\nexport { Event }\n\nexport default class EventMixin {\n\n  on (name, fn, context) {\n    var id = zid(this),\n      set = (handlers[id] || (handlers[id] = []));\n\n    context = context || this;   // 绑定上下文\n\n    set.push({\n      fn: fn,\n      name: name,\n      i: set.length,\n      context: context\n    });\n\n    return this;\n  }\n\n  /**\n   * 移除事件\n   */\n  off (name, fn, context) {\n    var id = zid(this);\n\n    findHandlers(this, name, fn).forEach(function (handler) {\n      delete handlers[id][handler.i];\n    });\n  }\n\n  /**\n   * 触发事件\n   */\n  trigger (name, data) {\n    var id = zid(this),\n      e;\n\n    e = typeof(name) == \"object\" ? name : new Event(name);\n\n    name = (name && name.type) || name;\n\n    findHandlers(this, name).forEach(function (handler) {\n\n      if (handler.fn.apply(handler.context, [e].concat(data)) === false\n          || (e.isPropagationStopped && e.isPropagationStopped())) {\n        return false;\n      };\n    });\n\n    return e;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/event.js\n **/","import template from '../template';\nimport $ from 'jquery';\n\nvar TPL_SORT = '<div class=\"cdlist-sort-container\">' +\n  '<ul>' +\n    '<% for (var i = 0; i < datas.length; i++) { %>' +\n      '<li class=\"cdlist-sort-item <% if (activeIndex == i) { %>cdlist-sort-item-active<% } %> ' +\n        '<% if (activeIndex == i && datas[activeIndex].types) { %> cdlist-sort-type-<%=datas[activeIndex].types[datas[activeIndex].activeIndex]%> <% } %>\" ' +\n        '<% if (activeIndex == i && datas[activeIndex].types) { %>data-sort-type=\"<%=datas[activeIndex].types[datas[activeIndex].activeIndex]%>\" <% } %>\" ' +\n        'data-sort-key=\"<%= datas[i].key %>\">' +\n        '<span><%= datas[i].name %></span>' +\n      '</li>' +\n    '<% } %>' +\n  '</ul>' +\n'</div>';\n\n/**\n * sort addons provides a way to sort the table's results\n * you can define UI by yourself, or use built in dom structure\n *\n * @param {object}   option sort      addon option\n * @param {string}   option.container the container of addon\n * @param {[object]} option.datas     the datas of sort, it must be with the right format\n * eg. [{\n *   key: 'default',                  // the key of a item\n *   name: 'defaul'                   // the display name of a item\n },{\n *   key: 'time',\n *   name: 'time sorting',\n *   types: [                          // type is meant to provide different way of sorting\n *     cdlist.addons.Rank.Const.ASC,  // from low to high\n *     cdlist.addons.Rank.Const.DESC // from high to low\n *   ]\n * }]\n */\nlet _addonName = 'sort';\n\nlet _option = {\n  historyKey: 'sort',\n  historyTypeKey: 'sort_type',\n  resetList: ['pagination']\n};\n\nclass Sort {\n  constructor (option) {\n    this.option = Object.assign({}, _option, option);\n  }\n\n  getName () {\n    return _addonName;\n  }\n\n  _getContainer () {\n    return this.option.container ? $(this.option.container) : this.root.$topPluginContainer;\n  }\n\n  _triggerResetEvent (preventHistory) {\n    this.option.resetList.forEach((addonName) => {\n      this.root.trigger(addonName + '.reset', [preventHistory])\n    });\n  }\n\n  initView () {\n    var self = this;\n    var $container = self._getContainer();\n    $container.append($(self._getHTML()));\n\n    this.$activeItems = $container.find('.cdlist-sort-item-active');\n\n    this._initEvent();\n  }\n\n  _initEvent () {\n    var self = this;\n\n    self._getContainer().delegate('.cdlist-sort-item', 'click', function () {\n      self._dealItem($(this));\n    });\n\n    self.root.on('sort.reset', function (e, preventDisptach) {\n      self.reset();\n    });\n  }\n\n  activeSort (key, type, preventHistory) {\n    var $item = this._getContainer().find('.cdlist-sort-item[data-sort-key=' + key + ']');\n    var filterData = this._findDataItem(key);\n\n    if (!$item.length || !filterData) {\n      return;\n    }\n\n    // 如果当前改变的 sort item 跟之前的不一致\n    // 则重置现有的 item\n    if (this.$activeItems && (this.$activeItems.get(0) != $item.get(0))) {\n      this._resetItem(this.$activeItems);\n      this.$activeItems = $item.addClass('cdlist-sort-item-active');\n\n      if (!preventHistory) {\n        this.root.setHistory(this.option.historyKey, key);\n      }\n    }\n\n\n    // type 存在且在 filterData 中有\n    if (type && filterData.types && filterData.types.indexOf(type) > -1) {\n      // 移除当前的type\n      var currentType = $item.data('sort-type');\n      currentType && $item.removeClass('cdlist-sort-type-' + currentType);\n\n      // 不相等才进行设置\n      if (currentType != type) {\n        // 加入现在的 type\n        $item.addClass('cdlist-sort-type-' + type).data('sort-type', type);\n\n        if (!preventHistory) {\n          if (type && filterData.types && filterData.types.indexOf(type) > -1) {\n            this.root.setHistory(this.option.historyTypeKey, type);\n          } else {\n            this.root.removeHistory(this.option.historyTypeKey);\n          }\n        }\n      }\n    } else {\n      if (!preventHistory) {\n        this.root.removeHistory(this.option.historyTypeKey);\n      }\n    }\n\n\n    return this._triggerChange(preventHistory);\n  }\n\n  /**\n   * deal click event for a sorting item\n   */\n  _dealItem ($item) {\n    var self = this,\n      key = $item.data('sort-key'),\n      nextIndex, nextType;\n\n    var dataItem = self._findDataItem(key);\n\n    // 找到要active的type值\n    if (dataItem.types) {\n      var currentType = $item.data('sort-type'),\n        index = dataItem.types.indexOf(currentType);\n\n      // 获得要变成的 type\n      if (index == -1) {\n        nextIndex = 0;\n      } else {\n        nextIndex = index + 1 == dataItem.types.length ? 0 : index + 1;\n      }\n      nextType = dataItem.types[nextIndex];\n    }\n\n    this.activeSort(key, nextType);\n  }\n\n  /**\n   * reset a sort dom, when current sort dom is not equal to the last\n   */\n  _resetItem ($lastDom) {\n    $lastDom.removeClass('cdlist-sort-item-active');\n    $lastDom.removeClass('cdlist-sort-type-' + $lastDom.data('sort-type'));\n    $lastDom.data('sort-type', null);\n  }\n\n  /**\n   * trigger sort change event\n   */\n  _triggerChange (preventHistory) {\n    this._triggerResetEvent(preventHistory);\n    this.root.trigger('reflow');\n  }\n\n  /**\n   * find user defined data item\n   */\n  _findDataItem (key) {\n    var filterTypes = this.option.datas.filter(function (item) {\n      return item.key == key;\n    });\n\n    return filterTypes[0];\n  }\n\n  _getHTML () {\n    this._dealSortData();\n\n    return template(TPL_SORT, {\n      datas: this.option.datas,\n      activeIndex: this.option.activeIndex\n    });\n  }\n\n  _dealSortData () {\n    var option = this.option;\n\n    if (option.activeIndex !== undefined) {\n      option.activeIndex = option.activeIndex || 0;\n      var itemData = option.datas[option.activeIndex];\n      itemData.activeIndex = itemData.activeIndex || 0;\n      return;\n    }\n\n    // 设置默认的 active 状态\n    if (option.historyEnable) {\n      var key = this.root.getHistoryValue(option.historyKey);\n      var typeKey = this.root.getHistoryValue(option.historyTypeKey);\n      var item = this._findDataItem(key);\n      var activeIndex,\n        activeTypeIndex;\n\n      if (item) {\n        this.option.activeIndex = activeIndex = this.option.datas.indexOf(item);\n      } else {\n        this.option.activeIndex = activeIndex = 0;\n        item = option.datas[activeIndex];\n      }\n\n      if (typeKey && item.types) {\n        item.types.forEach(function (type, index) {\n          if (type == typeKey) {\n            item.activeIndex = index;\n          }\n        });\n      } else {\n        item.activeIndex = 0;\n      }\n    }\n  }\n\n  setRoot (root) {\n    this.root = root;\n\n    // 如果可以改变 hash\n    if (this.option.historyEnable) {\n      this.root.on('hashchange', (e, hashData) => {\n        var key = this.root.getHistoryValue(this.option.historyKey)\n          || this.option.datas[this.option.activeIndex].key;\n\n        var item = this._findDataItem(key);\n        var type = this.root.getHistoryValue(this.option.historyTypeKey);\n\n        if (!type && item.types) {\n          type = item.types[item.activeIndex];\n        }\n\n        this.activeSort(key, type, true);\n      });\n    }\n  }\n\n  reset () {\n    var defaultSort = this.option.datas[0];\n\n    this.activeSort(defaultSort.key, defaultSort.types && defaultSort.types[0]);\n  }\n\n  getAddonData () {\n    var self = this,\n      $item = self._getContainer().find('.cdlist-sort-item-active'),\n      data;\n\n    if ($item.length > 0) {\n      data = {\n        key: $item.data('sort-key'),\n        type: $item.data('sort-type')\n      }\n    }\n\n    return data;\n  }\n}\n\nSort.SORT_MAP = {\n ASC: 'asc',\n DESC: 'desc'\n}\n\nexport default Sort;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/addons/sort.js\n **/","import History from './history'\n\n/**\n * remove base path\n */\nfunction getLocation (base) {\n  let path = window.location.pathname\n  if (base && path.indexOf(base) === 0) {\n    path = path.slice(base.length)\n  }\n  return (path || '/') + window.location.search + window.location.hash\n}\n\n/**\n * pushState\n */\nfunction pushState (url, replace = false) {\n  const history = window.history\n\n  if (this.canHistory) {\n    try {\n      if (replace) {\n        history.replaceState('', '', url)\n      } else {\n        history.pushState('', '', url)\n      }\n    } catch (e) {\n      window.location[replace ? 'assign' : 'replace'](url)\n    }\n  } else {\n    window.location.href = url;\n  }\n}\n\n/**\n * cover // to /\n */\nfunction cleanPath (path) {\n  return path.replace(/\\/\\//g, '/')\n}\n\nexport default class HTML5History extends History {\n  constructor (base, option) {\n    super(base, option);\n\n    this._listenPop();\n  }\n\n  _listenPop () {\n    window.addEventListener('popstate', e => {\n      this.cb(this.getState());\n    })\n  }\n\n  go (n) {\n    window.history.go(n)\n  }\n\n  getState () {\n    let state = {\n      hash: getLocation(this.base)\n    };\n\n    return state;\n  }\n\n  push (url) {\n    pushState.call(this, cleanPath(this.base + url));\n  }\n\n  replace (url) {\n    pushState.call(this, cleanPath(this.base + url), true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/history_h5.js\n **/","/**\n * cd-list History api\n */\nfunction normalizeBase (base) {\n  if (!base) {\n    const baseEl = document.querySelector('base')\n    base = baseEl ? baseEl.getAttribute('href') : '/'\n  }\n\n  if (base[0] !== '/') {\n    base = '/' + base\n  }\n\n  return base.replace(/\\/$/, '')\n}\n\nexport default class History {\n\n  go () {\n    throw 'need implemented'\n  }\n\n  push () {\n    throw 'need implemented'\n  }\n\n  replace () {\n    throw 'need implemented'\n  }\n\n  constructor (base = '/', option) {\n    option = option || {};\n\n    this.base = normalizeBase(base)\n\n    if (option.disableHistory) {\n      this.canHistory = false;\n    } else {\n      this.canHistory = !!window.history.pushState\n    }\n  }\n\n  listen (cb = ()=>{}) {\n    this.cb = cb\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/history.js\n **/","var getParamStr = function(url) {\n  if (!url) {\n    return;\n  }\n  var urlParts = url.split(\"?\");\n  var pathname = urlParts[0];\n  var urlParamString = url.substring(pathname.length + 1, url.length);\n  return urlParamString;\n}\n\nvar getParams = function(url) {\n  var params = [];\n  var urlParamString = getParamStr(url);\n  if (!urlParamString) {\n      return params;\n  }\n  params = urlParamString.split(\"&\");\n  return params;\n}\n\nvar getParamMap = function(url) {\n  var map = {};\n\n  var params = getParams(url);\n\n  params.forEach((val, index) => {\n    var kvs = val.split(\"=\");\n    var paramName = kvs[0];\n    var value = val.substring(paramName.length + 1, val.length);\n    map[paramName] = value;\n  });\n\n  return map;\n}\n\nvar getParam = function(url, key) {\n  var map = getParamMap(url);\n  return map[key];\n}\n\nvar addParam = function(url, paramStr) {\n  if (getParamStr(url)) {\n    url = url + \"&\" + paramStr;\n  } else {\n    url = url + \"?\" + paramStr;\n  }\n  return url;\n}\n\nvar url = {\n  getParamMap: getParamMap,\n  addParam: addParam,\n  getParam: getParam\n}\n\nexport default url;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/url.js\n **/"],"sourceRoot":""}